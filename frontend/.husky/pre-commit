#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Lint only changed files for speed; fall back to full lint if none detected
FILES="$(git diff --name-only --cached --diff-filter=ACM | tr '\n' ' ')"
if [ -n "$FILES" ]; then
  npx --yes eslint --max-warnings=0 $FILES || exit 1
else
  npm run -s lint || exit 1
fi
