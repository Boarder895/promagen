import useSWR from "swr";
import { apiGet } from '@/lib/api';
import type { Prompt as ApiPrompt } from '@/lib/api';

/**
 * usePrompts
 * Lightweight typed hook that fetches an array of prompts.
 * - Imports the API-side Prompt type as ApiPrompt so it won't clash with any local Prompt type.
 * - Uses a typed key parameter for the fetcher to keep TypeScript happy.
 *
 * If your real endpoint path differs, change "/api/prompts" to the correct URL.
 */
export default function usePrompts() {
  const { data, error, isValidating, mutate } = useSWR<ApiPrompt[]>(
    "/api/prompts",
    (key: string) => apiGet<ApiPrompt[]>(key)
  );

  return {
    data: data ?? ([] as ApiPrompt[]),
    error,
    isLoading: !error && !data,
    isValidating,
    mutate,
  };
}

// Re-export Prompt type for backwards compatibility
export type { Prompt } from '@/lib/api';
