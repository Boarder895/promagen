// prisma/schema.prisma â€” Promagen DB schema (20 providers)

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Provider {
  openai
  stability
  leonardo
  deepai
  google_imagen
  lexica
  novelai
  edenai
  runware
  hive
  recraft
  artistly
  canva
  adobe_firefly
  midjourney
  bing_image_creator
  nightcafe
  playground
  pixlr
  fotor
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  createdAt DateTime @default(now())
  keys      Key[]
}

model Key {
  id         String   @id @default(cuid())
  userId     String
  provider   Provider
  cipherText String   // AES-256-GCM encrypted API key
  createdAt  DateTime @default(now())

  user User @relation(fields: [userId], references: [id])
}

model Metric {
  id        String   @id @default(cuid())
  provider  Provider
  category  String   // adoption, quality, speed, cost, safety, innovation, ethics
  value     Float
  source    String
  createdAt DateTime @default(now())
}

model Score {
  id        String   @id @default(cuid())
  provider  Provider
  total     Float
  createdAt DateTime @default(now())
}

model Override {
  id        String   @id @default(cuid())
  provider  Provider
  category  String
  delta     Float
  createdAt DateTime @default(now())
}
